/* Comvertir Moneda */

function convertirAMoneda(numero) {
    var split = [];
    var coma = contieneSigno(numero, ',');
    var punto = contieneSigno(numero, '.');
    if (coma) {
        split = numero.split(',');
    } else if (punto) {
        split = numero.split('.');
    }
    var formador = "";
    if (coma || punto) {
        var contenedor = split[1].substring(0, 2);
        if (contenedor.length == 2) {
            formador = split[0] + "," + contenedor;
        } else {
            formador = split[0] + "," + contenedor + "0";

        }
    } else {
        if (numero == "") {
            formador = "0" + ",00";
        } else {
            formador = numero + "," + "00";
        }

    }
    return formador;
}


function contieneSigno(numero, signo) {
    var estado = false;
    for (var i = 0; i < numero.length; i++) {
        var caracter = numero.charAt(i);
        if (caracter == signo) {
            estado = true;
            break;
        }
    }
    return estado;
}


function obtenerNumero(cadenaAnalizar) {
    var cadena = "";
    var hayNumeroAdelante = false;
    var hayUnPuntoAdelante = false;
    for (var i = 0; i < cadenaAnalizar.length; i++) {
        var caracter = cadenaAnalizar.charAt(i);

        if (caracter == "." || caracter == ",") {
            if (hayNumeroAdelante && hayUnPuntoAdelante == false) {
                cadena = cadena + "" + caracter;
                hayUnPuntoAdelante = true;
            }

        } else {
            var ultima = parseInt(caracter);
            var estado = Number.isInteger(ultima);
            if (estado == true) {
                if (hayNumeroAdelante == false) {
                    hayNumeroAdelante = true;
                }
                cadena = cadena + "" + caracter;
            }
        }



    }

    return cadena;
}









//Initialize Toast

var Toast = Swal.mixin({
    toast: true,
    position: 'top-end',
    showConfirmButton: false,
    timer: 3000
});

/*
    @MODAL
*/

window.addEventListener('closeModal', event => {
    $('#modalForm').modal('hide');
});

window.addEventListener('openModal', event => {
    $('#modalForm').modal('show');
});

window.addEventListener('closeModalDetalle', event => {
    $('#modalFormDetalle').modal('hide');
});

window.addEventListener('openModalDetalle', event => {
    $('#modalFormDetalle').modal('show');
});

window.addEventListener('closeModalCliente', event => {
    $('#modalFormCliente').modal('hide');
});

window.addEventListener('abrirModalCliente', event => {
    $('#modalFormCliente').modal('show');
});
window.addEventListener('closeModalProcedencia', event => {
    $('#modalFormProcedencia').modal('hide');
});

window.addEventListener('abrirModalProcedencia', event => {
    $('#modalFormProcedencia').modal('show');
});

window.addEventListener('abrirModalEliminar', event => {
    $('#modalFormEliminar').modal('show');
});

window.addEventListener('cerrarModalEliminar', event => {

    $('#modalFormEliminar').modal('hide');
});

window.addEventListener('abrirModalMotivoCancelacionReserva', event => {
    $('#modalFormMotivoCancelacionReserva').modal('show');
});

window.addEventListener('cerrarModalMotivoCancelacionReserva', event => {

    $('#modalFormMotivoCancelacionReserva').modal('hide');
});

window.addEventListener('abrirModalComprobante', event => {
    $('#modalFormComprobante').modal('show');
});

window.addEventListener('cerrarModalComprobante', event => {

    $('#modalFormComprobante').modal('hide');
});

window.addEventListener('abrirModalItemEncomienda', event => {
    $('#modalFormItemEncomienda').modal('show');
});

window.addEventListener('cerrarModalItemEncomienda', event => {
    $('#modalFormItemEncomienda').modal('hide');
});

window.addEventListener('abrirModalItemRecibir', event => {
    $('#modalFormItemRecibir').modal('show');
});

window.addEventListener('cerrarModalItemRecibir', event => {
    $('#modalFormItemRecibir').modal('hide');
});

window.addEventListener('abrirModalItemPagar', event => {
    $('#modalFormItemPagar').modal('show');
});

window.addEventListener('cerrarModalItemPagar', event => {
    $('#modalFormItemPagar').modal('hide');
});

window.addEventListener('abrirModalItemEntregar', event => {
    $('#modalFormItemEntregar').modal('show');
});

window.addEventListener('cerrarModalItemEntregar', event => {
    $('#modalFormItemEntregar').modal('hide');
});


window.addEventListener('abrirModalAsientosDestinoHorario', event => {
    $('#modalAsientosDestinoHorario').modal('show');
});

window.addEventListener('cerrarModalAsientosDestinoHorario', event => {

    $('#modalAsientosDestinoHorario').modal('hide');
});




window.addEventListener('abrirModalAdelanto', event => {

    $('#modalFormAdelanto').modal('show');
});
window.addEventListener('cerrarModalAdelanto', event => {

    $('#modalFormAdelanto').modal('hide');
});

//crear pasaje
window.addEventListener('abrirModalCrearPasaje', event => {

    $('#modalFormCrearPasaje').modal('show');
});
window.addEventListener('cerrarModalCrearPasaje', event => {

    $('#modalFormCrearPasaje').modal('hide');
});
//chat pasajero
window.addEventListener('abrirModalChatPasajero', event => {

    $('#modalFormChatPasajero').modal('show');
});
window.addEventListener('cerrarModalChatPasajero', event => {

    $('#modalFormChatPasajero').modal('hide');
});
//reserva pasaje
window.addEventListener('abrirModalReservaPasaje', event => {

    $('#modalFormReservaPasaje').modal('show');
});
//reserva pasaje
window.addEventListener('abrirModalEditarPasaje', event => {

    $('#modalFormEditarPasaje').modal('show');
});
window.addEventListener('cerrarModalReservaPasaje', event => {

    $('#modalFormReservaPasaje').modal('hide');
});

/* RESERVA */

window.addEventListener('abrirModalPasajero', event => {

    $('#modalFormPasajero').modal('show');
});

window.addEventListener('closeModalPasajero', event => {
    $("#modalFormPasajero").modal('hide');
});


window.addEventListener('abrirModalReservaModalAsiento', event => {


    $('#modalFormReservaModalAsiento').modal('show');
});

window.addEventListener('closeModalReservaModalAsiento', event => {
    $("#modalFormReservaModalAsiento").modal('hide');
});

/* RESERVA */

/* ASIENTO RESERVADO */


window.addEventListener('abrirModalAsientoReservado', event => {

    $('#modalFormAsientoReservado').modal('show');
});

window.addEventListener('closeModalAsientoReservado', event => {
    $("#modalFormAsientoReservado").modal('hide');
});

/* ASIENTO RESERVADO */


window.addEventListener('abrirModalAdelantosCliente', event => {
    $('#modalFormAdelantosCliente').modal('show');
});

window.addEventListener('cerrarModalAdelantosCliente', event => {

    $('#modalFormAdelantosCliente').modal('show');
});



window.addEventListener('openInactivarModal', event => {
    $('#modalFormInactivar').modal('show');
});

window.addEventListener('closeInactivarModal', event => {
    $('#modalFormInactivar').modal('hide');
});

window.addEventListener('openActivarModal', event => {
    $('#modalFormActivar').modal('show');
});

window.addEventListener('closeActivarModal', event => {
    $('#modalFormActivar').modal('hide');
});

window.addEventListener('openErroMultipleModal', event => {
    $('#modalFormErrorMultiple').modal('show');
});

window.addEventListener('closeErrorModal', event => {
    $('#modalFormErrorMultiple').modal('hide');
});

window.addEventListener('alert', event => {
    ToastAlert(event);
});

function cerrarMenuModal() {
    $('#menu-movilsss').modal('hide');
}

function mostrarMenuModal() {
    $('#menu-movilsss').modal('show');
}

//Initialize ToastAlert

function ToastAlert(event) {
    var title = event.detail.title;
    var icon = event.detail.icon;

    Toast.fire({
        icon: icon,
        title: title
    })
}

//Initialize Search

$(document).ready(function() {
    $("#ap-buscar").keyup(function() {
        _this = this;
        $.each($("#ap-table tbody tr"), function() {
            if ($(this).text().toLowerCase().indexOf($(_this).val().toLowerCase()) === -1)
                $(this).hide();
            else
                $(this).show();
        });
    });
});

/**
 *	#. VALIDACION
 *	-------------------------------------------------------------------------------------------------------------------------------------
 **/

function empty(string) {
    string = string;
    if (string === '') {
        return string = true;
    }
}

function full(string) {
    string = string;
    if (string !== '') {
        return string = true;
    }
}

function vldFrmCampoNumerico() {
    var numero_documento = $("#numero_documento").val();
    var telefono = $("#telefono").val();

    if (
        full(numero_documento) && isNaN(numero_documento) ||
        full(telefono) && isNaN(telefono)
    ) {
        Toast.fire({
            icon: 'warning',
            title: '&nbsp;&nbsp; Este campo solo admite nÃºmeros'
        });
    } else {
        exit();
    }

}

function vldFrmCampoTexto() {
    var nombre = $("#nombre").val();
    var apellidos = $("#apellidos").val();

    expresion = /[A-Za-z]/;

    if (
        full(nombre) && !expresion.test(nombre) ||
        full(apellidos) && !expresion.test(apellidos)
    ) {
        Toast.fire({
            icon: 'warning',
            title: '&nbsp;&nbsp; Este campo solo admite letras'
        });
    } else {
        exit();
    }

}

function escucharEnterSiguienteCampo(escuchar, siquiente_input) {
    $("#" + escuchar).on('keyup', function(e) {
        if (e.key === 'Enter' || e.keyCode === 13) {
            $("#" + siquiente_input).focus();
            $('#' + siquiente_input).select();

        }

    });
}

function escuchaLiveWireSelect(id, subTitulo, titulo) {
    window.initTipoComprobanteDestinoDrop = () => {
        $('#' + id).select2({
            placeholder: titulo,
            allowClear: true,
            width: "100%",
        });
    }
    initTipoComprobanteDestinoDrop();
    $('#' + id).on('change', function(e) {
        livewire.emit('selected' + subTitulo + 'Item', e.target.value)
    });

    window.livewire.on('select2' + subTitulo, () => {
        initTipoComprobanteDestinoDrop();
    });
}



function enfocarSiguienteCampo(enfocar, siquiente_input) {
    $("#" + enfocar).click(function() {
        $("#" + siquiente_input).focus();
    });
}

function enfocarSeleccionarCampo(presionar, selecciona, valor) {
    $("#" + presionar).click(function() {
        $("#" + selecciona).focus();
        let select = "<option value=" + valor + ">" + valor + "</option>";
        $('#' + selecciona).html(select);
    });
}

function focusInputLiveWire(primero, segundo) {
    window.livewire.on(primero, function() {
        $("#" + segundo).focus();
    });

}



/**
 *	#. -
 *	-------------------------------------------------------------------------------------------------------------------------------------
 **/